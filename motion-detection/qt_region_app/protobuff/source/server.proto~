package server;  
  
message Message 
{    
	
	required ActionType type 		= 2 [default = ENGAGE];
	
	optional string time 				= 3;  
	optional bytes data 				= 4;
	optional string clientip 			= 5;
	optional string devicestarttime 		= 6;
	repeated MotionCamera motioncamera  		= 7;
	optional int32 packagesize 			= 8;
	
	
	enum ActionType 
	{
		 ENGAGE                 = 1000;
		 GET_TIME               = 1001;
		 SET_STATUS             = 1002;
		 RESPONSE_OK			  = 2000;
		 RESPONSE_NEXT			  = 2010;
		 RESPONSE_END			  = 2020;
		 RESPONSE_FINISH		  = 2030;
		 PROTO_HAS_FILE 		  = 3030;
		 PROTO_NO_FILE 		  	  = 3031;
	 
	}

	enum SocketType
	{
		SOCKET_PROTO_TOSTRING		= 10;
		SOCKET_PROTO_TOARRAY		= 11;
		SOCKET_PLAIN_TEXT			= 12;
		SPLITTED_MESSAGE			= 13;
		SINGLE_MESSAGE				= 14;
		SOCKET_BUFFER_NANO_SIZE     = 1024;
		SOCKET_BUFFER_MINI_SIZE     = 2048;
		SOCKET_BUFFER_MICRO_SIZE    = 4096;
		SOCKET_BUFFER_SMALL_SIZE    = 8196;
		SOCKET_BUFFER_REGULAR_SIZE  = 16392;
		SOCKET_BUFFER_MEDIUM_SIZE   = 32784;
		SOCKET_BUFFER_BIG_SIZE      = 65568;
		TCP_ECHO_PORT            	= 5010;
		TCP_STREAMING_PORT       	= 5020;
		UDP_PORT                 	= 5030;
		TCP_MSG_PORT            	= 5040;
	}
	
	
	message MotionCamera
	{
		repeated MotionMonth motionmonth    = 1;
		optional int32 cameraid   			= 2 [default = 0];
		optional int32 cameranumber   		= 3;
		optional string cameraname   		= 4;
		optional string timestart			= 5;
		optional string timeend				= 6;
		optional string name 			 	= 7;
		optional bool recognizing           = 8;
		optional string camerasince   		= 9;	 
		optional bool storeimage 		= 10 [default = true];
		optional bool storecrop 		= 11 [default = true];
		optional bool storevideo 		= 12 [default = true];
		optional string codename        = 13 [default = "test"];
		optional bool hasregion		    = 14;
		optional string coordinates		= 15;
		optional double delay			= 16 [default = 2];
		optional string startrectime 	= 17;
		optional string stoprectime 	= 18;
		optional bool	runatstartup	= 19;
		optional int32 activemat		= 20;
		optional bool recognizing_flag  = 21;
		optional int32 db_idcamera 		= 22;
		optional int32 db_idmat 		= 23;
	}
	
	message MotionMonth
	{
		repeated MotionDay motionday 		= 1;
		optional string monthlabel			= 2;
	}

	message MotionDay
	{
		repeated Instance instance      		= 1;
		optional string daylabel				= 2;
		optional int32 db_dayid 				= 3;
		optional int32 db_recognitionsetupid    = 4;
		optional string xmlfilename				= 5;
		optional string xmlfilepath				= 6; 
	}
	
	message Instance
	{
		required int32 		idinstance 		= 1;
		optional string 	instancestart   = 2;	
		optional string 	instanceend	    = 3;
		optional string 	fileformat		= 4;
		optional string 	croppedformat	= 5;
		repeated Image 		image      	    = 6;
		repeated Crop 		crop      	    = 7;		
		optional Video 		video      	    = 8;
	}
	
	message Image
	{
		optional string path 				= 1;
		optional string name				= 2;
		optional int32 	imagechanges 	    = 3;
		optional string timeimage			= 4;
	}
	
	message Crop
	{
		optional string path 				= 1;
		optional string name				= 2;
		optional string imagefather			= 3;
		optional int32 db_imagefatherid		= 4;
	}
	
	message Video
	{
		optional string path 				= 1;
		optional string name				= 2;
		optional string instancefolder		= 3;
	}

		
}  

